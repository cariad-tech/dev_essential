<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!--
Copyright @ 2021 VW Group. All rights reserved.
 
This Source Code Form is subject to the terms of the Mozilla
Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
-->
<mapping>
    <header>
        <language_version>1.00</language_version>
        <author>dev_essential team</author>
        <date_creation>2016-Mar-22</date_creation>
        <date_change>2016-Mar-22</date_change>
        <description>Mapping description generated by SiMaEditor</description>
        <ddl>../description/base.description;../description/all_types.description</ddl>
    </header>

    <sources>
        <source name="Light" type="tFEP_Driver_LightControl" />
        <source name="Wiper" type="tFEP_Driver_WiperControl" />
        <source name="AALA" type="tFEP_Driver_AalaControl" />
        <source name="Additional" type="tFEP_Driver_AdditionalControl" />
    </sources>

    <targets>
        <target name="Signal" type="tFEP_Driver_DriverCtrl">
            <assignment to="f64SimTime" constant="42" />
            <assignment to="sAalaControl" from="AALA" />
            <assignment to="sWiperControl" from="Wiper" />
            <assignment to="ui8Spare1[0]" from="Light.ui8Spare1[3]" />
            <assignment to="ui8Spare1[1]" from="Light.ui8Spare1[2]" />
            <assignment to="ui8Spare1[2]" from="Light.ui8Spare1[1]" />
            <assignment to="ui8Spare1[3]" from="Light.ui8Spare1[0]" />
            <assignment to="ui32ValidityMask" from="Additional.ui32ValidityMask" transformation="polynom2" />
            <assignment to="sLightControl.eLightState" from="Light.eLightState" />
            <assignment to="ui32VehicleId" function="simulation_time()" />
            <assignment to="sLongitudinal.f32ThrottlePedal" function="trigger_counter(10)" />
            <assignment to="sLightControl.bIndicatorLeft" function="received(Light)" />
            <assignment to="eGear" from="Wiper.eFrontState" transformation="table1" />

            <trigger type="periodic" period="10" unit="ms"/>
            <trigger type="signal" variable="Light"/>
            <trigger type="data" variable="Light.ui8Spare1[3]" operator="less_than" value="2"/>
        </target>
    </targets>

    <transformations>
        <polynomial name="polynom1" a="1" b="1.7" c="2.0" d="1.1" />
        <polynomial name="polynom2" a="2" b="1" />
        <enum_table name="table1" from="tFEP_Driver_WiperState" to="tFEP_Driver_GearSelection" default="GS_N" >
            <conversion from="WS_Off" to="GS_1"/>
            <conversion from="WS_Auto" to="GS_2"/>
            <conversion from="WS_Interval" to="GS_3"/>
            <conversion from="WS_OnStandard" to="GS_4"/>
            <conversion from="WS_OnFast" to="GS_1"/>
        </enum_table>
    </transformations>
</mapping>